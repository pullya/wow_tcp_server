# wow_tcp_server
"Word of Wisdom" tcp-server

Это простой tcp-сервер, который принимает входящие соединения по порту 8081 и отправляет в ответ одну из "Цитат мудрости". И такой же простой tcp-клиент, который отправляет N запросов серверу и получает ответ.

Сервер и клиент поднимаются в контейнерах при помощи команд:
```bash
docker-compose build
docker-compose up
```

На стороне сервера и клиента реализован механизм Proof of Work. После установки соединения сервер отправляет клиенту запрос с указанием требуемой сложности поиска решения, ожидает ответ, валидирует его и в случае успеха возвращает цитату клиенту. Клиент, получив запрос на выполнение работы, ищет число nonce, удовлетворяющее условию сложности и возвращает его серверу.

В качестве Proof of Work используется упрощенный алгоритм Ethash. Выбор данного алгоритма обусловлен следующими факторами:
 - повышенная устойчивость алгоритма к ASIC-майнингу
 - возможность менять уровень сложность поиска решения
 - открытый исходный код и относительно невысокие требования к производительности (по сравнению с другими алгоритмами)

## Параметры конфигурации
Дефолтные значения параметров конфигурации для сервера заданы в файле *./tcp-server/config.yaml*, для клиента - в *./tcp-client/config.yaml*
Эти значения можно изменять путем установки соответствующих переменных окружения. В этом случае новые значения перепишут дефолтные, указанные в yaml-файле.

### Конфигурация сервера
| Название в yaml-файле                 | Название ENV                 | Описание                                         |
|---------------------------------------|------------------------------|--------------------------------------------------|
| port                                  | WOW_SERVER_PORT              | Номер порта для соединения с tcp-сервером        |
| timeout                               | WOW_SERVER_TIMEOUT           | Таймаут для входящего соединения в миллисекундах |
| serviceName                           | WOW_SERVER_SERVICE_NAME      | Имя сервиса для отображения в логах              |
| difficulty                            | WOW_SERVER_DIFFICULTY        | Условие сложности для Proof of work              |
| proofString                           | WOW_SERVER_PROOF_STRING      | Строка для Proof of work                         |
| logLevel                              | WOW_SERVER_LOG_LEVEL         | Уровень логирования                              |


### Конфигурация клиента
| Название в yaml-файле    | Название ENV                   | Описание                                                    |
|--------------------------|--------------------------------|-------------------------------------------------------------|
| port                     | WOW_CLIENT_PORT                | Номер порта для соединения с tcp-сервером                   |
| serviceName              | WOW_CLIENT_SERVICE_NAME        | Имя сервиса для отображения в логах                         |
| clientsCount             | WOW_CLIENT_CLIENTS_COUNT       | Количество клиентов, которое будет запущено                 |
| connInterval             | WOW_CLIENT_CONN_INTERVAL       | Интервал в миллисекундах между запуском горутин с клиентами |
| logLevel                 | WOW_CLIENT_LOG_LEVEL           | Уровень логирования                                         |